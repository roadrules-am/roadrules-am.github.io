import{a as p,R as v,p as r,x as A,w as I}from"./chunk-PVWAREVJ-D_ojKNEs.js";import{u as k}from"./useCardStore-CrKPGiTU.js";import{g as E}from"./getNextCard-ZedxcbV7.js";var P="https://comments.app/js/widget.js?3",D=function(e){var a=e.commentsNumber,i=a===void 0?5:a,t=e.containerClassName,u=t===void 0?"telegram-comments":t,d=e.customColor,s=e.customHeight,c=e.onLoad,l=e.pageId,m=e.showColorfulNames,o=m===void 0?!1:m,f=e.showDislikes,b=f===void 0?!0:f,h=e.showIconOutlines,x=e.useDarkMode,w=x===void 0?!1:x,C=e.websiteKey,N=e.wrapperClassName,j=N===void 0?"telegram-comments__wrapper":N,g=p.useRef(null);return p.useEffect(function(){var n=document.createElement("script");n.src=P,n.async=!0,n.setAttribute("data-limit",i),n.setAttribute("data-comments-app-website",C),d&&n.setAttribute("data-color",d),s&&n.setAttribute("data-height",s),w&&n.setAttribute("data-dark","1"),l&&n.setAttribute("data-page-id",l),o&&n.setAttribute("data-colorful","1"),b&&n.setAttribute("data-dislikes","1"),h&&n.setAttribute("data-outlined","1"),n.onload=c?function(){return c()}:null,n.onerror=function(y){return console.log(y)},g.current&&g.current.appendChild(n)},[]),C?v.createElement("div",{"data-testid":"rtc-container",className:u},v.createElement("div",{"data-testid":"rtc-wrapper",className:j,ref:g})):null};function R({question:e,cardId:a,groupId:i,imageId:t,answers:u,correctId:d,correctStreak:s,forgetProbability:c}){const{setCardFP:l,setCardStreak:m}=k(),o=`${i}-${a}`;let f=!1;typeof window<"u"&&(f=window.matchMedia("(prefers-color-scheme: dark)").matches);function b(h){if(h){const x=s===null?.3:1/(1.05+s),w=s===null?3:s+1;l(o,x),m(o,w)}else l(o,1),m(o,0)}return r.jsxs("div",{className:"w-full max-w-[420px] flex flex-col",children:[r.jsxs("p",{className:"px-2 text-sm my-1",children:["Г",i," В",a,", FP: ",c," CS: ",s]}),t&&r.jsx("img",{src:`/card-img/${t}.png`,alt:"illustration for card",className:"max-h-[220px] my-1 hidden w-full dark:block"}),r.jsx("h2",{className:"px-4 my-2 text-md font-bold",children:e}),r.jsx($,{answerOptions:u,correctId:d,onAnswer:b},o),r.jsx("div",{className:"mt-8",children:r.jsx(D,{websiteKey:"yqxQuEh8",useDarkMode:f,wrapperClassName:"TGCommentsWidget"},o)})]})}function M({onNextCard:e,isVisible:a}){return r.jsx("div",{className:`fixed bottom-0 left-0 w-full px-1 py-2 ${a?"":"hidden"}`,children:r.jsx("button",{className:"px-3 rounded-full flex flex-row h-[48px] w-full justify-center items-center active:bg-blue-600 hover:cursor-pointer bg-blue-400 dark:bg-blue-700",type:"button",onClick:e,children:"Следующий"})})}function $({answerOptions:e,correctId:a,onAnswer:i}){const[t,u]=p.useState(!1),d=A();function s(l){u(!0),i(l)}function c(){d(`/questions/${E()}`),u(!1)}return r.jsxs("div",{className:"w-full flex flex-col gap-2 px-1 my-2",children:[e.map((l,m)=>{const o=a===m;return r.jsx(q,{text:l,isAnswered:t,isCorrect:o,handleAnswer:()=>s(o)},l)}),r.jsx(M,{isVisible:t,onNextCard:c})]})}function q({isCorrect:e,handleAnswer:a,text:i,isAnswered:t}){const[u,d]=p.useState(!1);let s="";t&&e?s="bg-green-100 dark:bg-green-900 border-transparent":t&&u&&!e?s="bg-red-100 dark:bg-red-900 border-transparent":s="dark:border-neutral-800 border-neutral-300",p.useEffect(()=>{t||d(!1)},[t]);function c(){a(),d(!0)}return r.jsx("button",{type:"button",disabled:t,className:`${t?s:"dark:border-neutral-700 border-neutral-400"} text-md flex flex-col  min-h-[48px]  p-3 border-2 rounded-md text-left`,onClick:c,children:i},i)}function F({params:e}){return[{title:`${e.questionId} – roadrules-am`},{name:"description",content:"Welcome to React Router!"}]}const K=I(function({params:a}){const{getCardById:i}=k(),t=i(a.questionId);if(!t)return r.jsx("p",{children:"error"});const{answerOptions:u,cardId:d,correctId:s,correctStreak:c,forgetProbability:l,groupId:m,question:o,imageId:f}=t;return r.jsx(R,{question:o,answers:u,cardId:d,correctId:s,correctStreak:c,forgetProbability:l,groupId:m,imageId:f})});export{K as default,F as meta};
