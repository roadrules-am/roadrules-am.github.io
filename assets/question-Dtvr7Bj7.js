import{a as x,p as n,v as g,w}from"./chunk-PVWAREVJ-DQ4vhhqz.js";import{u as p,g as j}from"./getNextCard-Bz-_PcH0.js";function C({question:s,cardId:r,groupId:l,imageId:e,answers:d,correctId:i,correctStreak:t,forgetProbability:c}){const{setCardFP:o,setCardStreak:f}=p();x.useEffect(()=>{const u=document.createElement("script");return u.src="https://comments.app/js/widget.js?3",u.async=!0,u.setAttribute("data-comments-app-website","yqxQuEh8"),u.setAttribute("data-limit","5"),document.body.appendChild(u),()=>{document.body.removeChild(u)}},[]);const a=`${l}-${r}`;function m(u){if(u){const b=t===null?.3:1/(1.05+t),h=t===null?3:t+1;o(a,b),f(a,h)}else o(a,1),f(a,0)}return n.jsxs("div",{className:"w-full max-w-[420px] flex flex-col",children:[n.jsxs("p",{className:"px-2 text-sm my-1",children:["Г",l," В",r,", FP: ",c," CS: ",t]}),e&&n.jsx("img",{src:`/card-img/${e}.png`,alt:"illustration for card",className:"max-h-[220px] my-1 hidden w-full dark:block"}),n.jsx("h2",{className:"px-4 my-2 text-md font-bold",children:s}),n.jsx(N,{answerOptions:d,correctId:i,onAnswer:m},a)]})}function y({onNextCard:s,isVisible:r}){return n.jsx("div",{className:`absolute bottom-0 left-0 w-full px-1 py-2 ${r?"":"hidden"}`,children:n.jsx("button",{className:"px-3 rounded-full flex flex-row h-[48px] w-full justify-center items-center active:bg-blue-600 hover:cursor-pointer bg-blue-400 dark:bg-blue-700",type:"button",onClick:s,children:"Следующий"})})}function N({answerOptions:s,correctId:r,onAnswer:l}){const[e,d]=x.useState(!1),i=g();function t(o){d(!0),l(o)}function c(){i(`/questions/${j()}`),d(!1)}return n.jsxs("div",{className:"w-full flex flex-col gap-2 px-1 my-2",children:[s.map((o,f)=>{const a=r===f;return n.jsx(k,{text:o,isAnswered:e,isCorrect:a,handleAnswer:()=>t(a)},o)}),n.jsx(y,{isVisible:e,onNextCard:c})]})}function k({isCorrect:s,handleAnswer:r,text:l,isAnswered:e}){const[d,i]=x.useState(!1);let t="";e&&s?t="bg-green-100 dark:bg-green-900 border-transparent":e&&d&&!s?t="bg-red-100 dark:bg-red-900 border-transparent":t="dark:border-neutral-800 border-neutral-300",x.useEffect(()=>{e||i(!1)},[e]);function c(){r(),i(!0)}return n.jsx("button",{type:"button",disabled:e,className:`${e?t:"dark:border-neutral-700 border-neutral-400"} text-md flex flex-col  min-h-[48px]  p-3 border-2 rounded-md text-left`,onClick:c,children:l},l)}function $({params:s}){return[{title:`${s.questionId} – roadrules-am`},{name:"description",content:"Welcome to React Router!"}]}const q=w(function({params:r}){const{getCardById:l}=p(),e=l(r.questionId);if(!e)return n.jsx("p",{children:"error"});const{answerOptions:d,cardId:i,correctId:t,correctStreak:c,forgetProbability:o,groupId:f,question:a,imageId:m}=e;return n.jsx(C,{question:a,answers:d,cardId:i,correctId:t,correctStreak:c,forgetProbability:o,groupId:f,imageId:m})});export{q as default,$ as meta};
