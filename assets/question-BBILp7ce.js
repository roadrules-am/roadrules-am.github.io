import{a as p,R as N,p as n,v as A,w as I}from"./chunk-PVWAREVJ-DQ4vhhqz.js";import{u as v,g as E}from"./getNextCard-Bz-_PcH0.js";var P="https://comments.app/js/widget.js?3",R=function(e){var a=e.commentsNumber,i=a===void 0?5:a,t=e.containerClassName,u=t===void 0?"telegram-comments":t,d=e.customColor,s=e.customHeight,c=e.onLoad,o=e.pageId,m=e.showColorfulNames,l=m===void 0?!1:m,f=e.showDislikes,b=f===void 0?!0:f,h=e.showIconOutlines,x=e.useDarkMode,j=x===void 0?!1:x,g=e.websiteKey,C=e.wrapperClassName,k=C===void 0?"telegram-comments__wrapper":C,w=p.useRef(null);return p.useEffect(function(){var r=document.createElement("script");r.src=P,r.async=!0,r.setAttribute("data-limit",i),r.setAttribute("data-comments-app-website",g),d&&r.setAttribute("data-color",d),s&&r.setAttribute("data-height",s),j&&r.setAttribute("data-dark","1"),o&&r.setAttribute("data-page-id",o),l&&r.setAttribute("data-colorful","1"),b&&r.setAttribute("data-dislikes","1"),h&&r.setAttribute("data-outlined","1"),r.onload=c?function(){return c()}:null,r.onerror=function(y){return console.log(y)},w.current&&w.current.appendChild(r)},[]),g?N.createElement("div",{"data-testid":"rtc-container",className:u},N.createElement("div",{"data-testid":"rtc-wrapper",className:k,ref:w})):null};function $({question:e,cardId:a,groupId:i,imageId:t,answers:u,correctId:d,correctStreak:s,forgetProbability:c}){const{setCardFP:o,setCardStreak:m}=v(),l=`${i}-${a}`;function f(b){if(b){const h=s===null?.3:1/(1.05+s),x=s===null?3:s+1;o(l,h),m(l,x)}else o(l,1),m(l,0)}return n.jsxs("div",{className:"w-full max-w-[420px] flex flex-col mb-[60px]",children:[n.jsxs("p",{className:"px-2 text-sm my-1",children:["Г",i," В",a,", FP: ",c," CS: ",s]}),t&&n.jsx("img",{src:`/card-img/${t}.png`,alt:"illustration for card",className:"max-h-[220px] my-1 hidden w-full dark:block"}),n.jsx("h2",{className:"px-4 my-2 text-md font-bold",children:e}),n.jsx(D,{answerOptions:u,correctId:d,onAnswer:f},l),n.jsx(R,{websiteKey:"yqxQuEh8"})]})}function q({onNextCard:e,isVisible:a}){return n.jsx("div",{className:`fixed bottom-0 left-0 w-full px-1 py-2 ${a?"":"hidden"}`,children:n.jsx("button",{className:"px-3 rounded-full flex flex-row h-[48px] w-full justify-center items-center active:bg-blue-600 hover:cursor-pointer bg-blue-400 dark:bg-blue-700",type:"button",onClick:e,children:"Следующий"})})}function D({answerOptions:e,correctId:a,onAnswer:i}){const[t,u]=p.useState(!1),d=A();function s(o){u(!0),i(o)}function c(){d(`/questions/${E()}`),u(!1)}return n.jsxs("div",{className:"w-full flex flex-col gap-2 px-1 my-2",children:[e.map((o,m)=>{const l=a===m;return n.jsx(O,{text:o,isAnswered:t,isCorrect:l,handleAnswer:()=>s(l)},o)}),n.jsx(q,{isVisible:t,onNextCard:c})]})}function O({isCorrect:e,handleAnswer:a,text:i,isAnswered:t}){const[u,d]=p.useState(!1);let s="";t&&e?s="bg-green-100 dark:bg-green-900 border-transparent":t&&u&&!e?s="bg-red-100 dark:bg-red-900 border-transparent":s="dark:border-neutral-800 border-neutral-300",p.useEffect(()=>{t||d(!1)},[t]);function c(){a(),d(!0)}return n.jsx("button",{type:"button",disabled:t,className:`${t?s:"dark:border-neutral-700 border-neutral-400"} text-md flex flex-col  min-h-[48px]  p-3 border-2 rounded-md text-left`,onClick:c,children:i},i)}function F({params:e}){return[{title:`${e.questionId} – roadrules-am`},{name:"description",content:"Welcome to React Router!"}]}const K=I(function({params:a}){const{getCardById:i}=v(),t=i(a.questionId);if(!t)return n.jsx("p",{children:"error"});const{answerOptions:u,cardId:d,correctId:s,correctStreak:c,forgetProbability:o,groupId:m,question:l,imageId:f}=t;return n.jsx($,{question:l,answers:u,cardId:d,correctId:s,correctStreak:c,forgetProbability:o,groupId:m,imageId:f})});export{K as default,F as meta};
